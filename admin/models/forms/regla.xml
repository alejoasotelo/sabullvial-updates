<?xml version="1.0" encoding="utf-8"?>
<form>
	<fieldset>
		<field
			name="id"
			type="hidden"
			default="0"
		/>

		<field
			name="published"
			type="list"
			label="JSTATUS"
			description="JFIELD_PUBLISHED_DESC"
			class="chzn-color-state"
			default="1"
			size="1"
			>
			<option value="1">JPUBLISHED</option>
			<option value="0">JUNPUBLISHED</option>
			<option value="2">JARCHIVED</option>
			<option value="-2">JTRASHED</option>
		</field>

		<field
			name="name"
			type="text"
			label="COM_SABULLVIAL_REGLA_NAME_LABEL"
			description="COM_SABULLVIAL_REGLA_NAME_DESC"
			size="40"
			class="inputbox"
			default=""
			required="true"
		/>

		<field
			name="description"
			type="textarea"
			label="COM_SABULLVIAL_REGLA_DESCRIPTION_LABEL"
			description="COM_SABULLVIAL_REGLA_DESCRIPTION_DESC"
			rows="5"
			cols="40"
			class="inputbox input-xxlarge"
			default=""
		/>

		<field 
			name="event_create"
			type="list"
			label="COM_SABULLVIAL_REGLA_EVENT_CREATE_LABEL"
			description="COM_SABULLVIAL_REGLA_EVENT_CREATE_DESC"
			onchange="
				this.form.jform_event_create_value.value = '';
				this.form.jform_event_create_estado_cotizacion.value = '';
				this.form.jform_event_create_estado_cliente.value = '';
				this.form.jform_event_close.value = '';
				this.form.jform_event_close_value.value = '';
				this.form.jform_task_value_llamada.value = '';
				this.form.jform_task_value_email.value = '';
				this.form.jform_task_value_action.value = '';
				jQuery('select').trigger('liszt:updated');
				jQuery('#jform_event_create_estado_cotizacion, #jform_event_create_estado_cliente, #jform_event_close, #jform_event_close_value, #jform_task_value_llamada, #jform_task_value_email, #jform_task_value_action').trigger('change');
				"
		>
			<option value="">- Seleccione una opción -</option>
			<option value="estado_cotizacion">COM_SABULLVIAL_REGLA_EVENT_ESTADO_COTIZACION</option>
			<option value="estado_cliente">COM_SABULLVIAL_REGLA_EVENT_ESTADO_CLIENTE_SISTEMA</option>
			<option value="inactive_cliente">COM_SABULLVIAL_REGLA_EVENT_CLIENTE_INACTIVO</option>
		</field>

		<!-- Estado Cotización -->

		<field
			showon="event_create:estado_cotizacion"
			name="event_create_estado_cotizacion"
			type="estadocotizacion"
			label="COM_SABULLVIAL_REGLA_EVENT_CREATE_ESTADO_COTIZACION_LABEL"
			description="COM_SABULLVIAL_REGLA_EVENT_CREATE_ESTADO_COTIZACION_DESC"
			class="chzn-color-state chzn-estadocotizacion input-xxlarge"
			onchange="this.form.jform_event_create_value.value = jQuery(this).val() != null ? jQuery(this).val().join(',') : '';"
			multiple="true"
		/>

		<!-- Estado Cliente -->

		<field
			showon="event_create:estado_cliente"
			name="event_create_estado_cliente"
			type="estadocliente"
			label="COM_SABULLVIAL_REGLA_EVENT_CREATE_ESTADO_CLIENTE_LABEL"
			description="COM_SABULLVIAL_REGLA_EVENT_CREATE_ESTADO_CLIENTE_DESC"
			class="chzn-color-state chzn-estadocliente input-xxlarge"
			onchange="this.form.jform_event_create_value.value = jQuery(this).val() != null ? jQuery(this).val().join(',') : '';"
			multiple="true"
		/>

		<!-- Cliente inactivo -->

		<field
			showon="event_create:inactive_cliente"
			name="event_create_inactive_cliente_desc"
			type="spacer"
			label="COM_SABULLVIAL_REGLA_EVENT_CREATE_INACTIVE_CLIENTE_DESC_LABEL"
			/>

		<field
			showon="event_create:inactive_cliente"
			name="event_create_inactive_cliente_in_days"
			type="number"
			label="COM_SABULLVIAL_REGLA_EVENT_CREATE_INACTIVE_CLIENTE_IN_DAYS_LABEL"
			onchange="this.form.jform_event_create_value.value = this.value;"
			value="3"
		/>

		<field name="event_create_value" type="hidden" />

		<!-- Fin -->

		<!-- <field name="tarea" type="subform"
			formsource="administrator/components/com_sabullvial/models/forms/tarea.xml"
			label="Tarea" description="Formulario para la tarea" /> -->

		<field 
			name="event_close"
			type="list"
			label="COM_SABULLVIAL_REGLA_EVENT_CLOSE_LABEL"
			onchange="
				this.form.jform_event_close_value.value = '';
				this.form.jform_event_close_estado_cotizacion.value = '';
				this.form.jform_event_close_estado_cliente.value = '';
				jQuery('#jform_event_close_estado_cotizacion, #jform_event_close_estado_cliente').trigger('liszt:updated');
				jQuery('#jform_event_close_estado_cotizacion, #jform_event_close_estado_cliente').trigger('change');
			"
		>
			<option value="">- Seleccione una opción -</option>
			<option showon="event_create:estado_cotizacion" value="estado_cotizacion">COM_SABULLVIAL_REGLA_EVENT_ESTADO_COTIZACION</option>
			<option showon="event_create:estado_cliente" value="estado_cliente">COM_SABULLVIAL_REGLA_EVENT_ESTADO_CLIENTE_SISTEMA</option>
			<option showon="event_create:inactive_cliente" value="estado_cliente_tango">COM_SABULLVIAL_REGLA_EVENT_ESTADO_CLIENTE</option>
			<option value="event_none">COM_SABULLVIAL_REGLA_EVENT_NO_CERRAR_TAREA</option>
		</field>

		<field
			showon="event_close:estado_cotizacion"
			name="event_close_estado_cotizacion"
			type="estadocotizacion"
			label="COM_SABULLVIAL_REGLA_EVENT_ESTADO_COTIZACION_LABEL"
			class="chzn-color-state chzn-estadocotizacion input-xxlarge"
			onchange="this.form.jform_event_close_value.value = jQuery(this).val() != null ? jQuery(this).val().join(',') : '';"
			multiple="true"
		/>

		<field
			showon="event_close:estado_cliente,estado_cliente_tango"
			name="event_close_estado_cliente"
			type="estadocliente"
			label="COM_SABULLVIAL_REGLA_EVENT_ESTADO_CLIENTE_SISTEMA_LABEL"
			class="chzn-color-state chzn-estadocliente input-xxlarge"
			onchange="this.form.jform_event_close_value.value = jQuery(this).val() != null ? jQuery(this).val().join(',') : '';"
			multiple="true"
			default=""
			placeholder="- Seleccione una opción -"
		>
		</field>

		<field name="event_close_value" type="hidden" />

		<field
			name="create_task_spacer"
			type="spacer"
			label="COM_SABULLVIAL_REGLA_CREATE_TASK_LABEL"
		/>
		
		<field
			name="task_type"
			type="list"
			label="COM_SABULLVIAL_TAREA_TASK_TYPE_LABEL"
			description="COM_SABULLVIAL_TAREA_TASK_TYPE_DESC"
			class="inputbox no-chosen select2"
			default="0"
			onchange="
				this.form.jform_task_value_llamada.value = '';
				this.form.jform_task_value_llamada_select.value = '';
				this.form.jform_task_value_email.value = '';
				this.form.jform_task_value_email_select.value = '';
				this.form.jform_task_value_action.value = '';
				this.form.jform_task_value.value = '';
				jQuery('#jform_task_value, #jform_task_value_llamada, #jform_task_value_email').trigger('liszt:updated').trigger('change');
			"
			>
			<option value="">COM_SABULLVIAL_TAREA_SELECCIONAR_TASK_TYPE</option>
			<option value="llamada">COM_SABULLVIAL_TAREA_TASK_TYPE_LLAMADA</option>
			<option value="email">COM_SABULLVIAL_TAREA_TASK_TYPE_NOTIFICAR_POR_EMAIL</option>
			<option value="aprobar_cliente" onclick="this.form.jform_task_value.value = this.value">COM_SABULLVIAL_TAREA_TASK_TYPE_APROBAR_CLIENTE</option>
			<option value="action">COM_SABULLVIAL_TAREA_TASK_TYPE_ACTION</option>
		</field>

		<field
			showon="task_type:llamada"
			name="task_value_llamada"
			type="list"
			label="COM_SABULLVIAL_REGLA_TASK_VALUE_LLAMADA_LABEL"
			default=""
			onchange="
				this.form.jform_task_value.value = this.value;
				this.form.jform_task_value_llamada_select.value = '';
			"
		>
			<option value="">- Seleccione una opción -</option>
			<option showon="event_create:estado_cotizacion" value="desde_cotizacion_cliente">COM_SABULLVIAL_REGLA_DESDE_CLIENTE_COTIZACION</option>
			<option showon="event_create:estado_cliente" value="desde_cliente">COM_SABULLVIAL_REGLA_DESDE_CLIENTE_SISTEMA</option>
			<option showon="event_create:inactive_cliente" value="desde_cliente_tango">COM_SABULLVIAL_REGLA_DESDE_CLIENTE</option>
			<option value="select">COM_SABULLVIAL_REGLA_INGRESE_TELEFONO</option>
		</field>

		<field
			showon="task_value_llamada:select"
			name="task_value_llamada_select"
			type="text"
			label="Ingresar teléfono"
			onchange="this.form.jform_task_value.value = this.value;"
			default=""
		/>

		<field
			showon="task_type:email"
			name="task_value_email"
			type="list"
			label="COM_SABULLVIAL_REGLA_TASK_VALUE_EMAIL_LABEL"
			description="COM_SABULLVIAL_TAREA_TASK_VALUE_NOTIFICAR_POR_EMAIL_DESC"
			onchange="
				this.form.jform_task_value.value = this.value;
				this.form.jform_task_value_email_select.value = '';
			"
		>
			<option value="">- Seleccione una opción -</option>
			<option showon="event_create:estado_cotizacion" value="desde_cotizacion">COM_SABULLVIAL_REGLA_DESDE_COTIZACION</option>
			<!-- <option showon="event_create:estado_cotizacion" value="desde_cotizacion_cliente">COM_SABULLVIAL_REGLA_DESDE_CLIENTE_COTIZACION</option> -->
			<option showon="event_create:estado_cliente" value="desde_cliente">COM_SABULLVIAL_REGLA_DESDE_CLIENTE_SISTEMA</option>
			<option showon="event_create:inactive_cliente" value="desde_cliente_tango">COM_SABULLVIAL_REGLA_DESDE_CLIENTE</option>
			<option value="select">COM_SABULLVIAL_REGLA_INGRESE_EMAIL</option>
		</field>

		<field
			showon="task_value_email:select"
			name="task_value_email_select"
			type="email"
			label="COM_SABULLVIAL_REGLA_TASK_VALUE_EMAIL_SELECT_LABEL"
			onchange="this.form.jform_task_value.value = this.value;"
			default=""
		/>

		<field
			showon="task_type:action"
			name="task_value_action"
			type="text"
			label="COM_SABULLVIAL_REGLA_TASK_VALUE_ACTION_LABEL"
			description="COM_SABULLVIAL_REGLA_TASK_VALUE_ACTION_DESC"
			onchange="this.form.jform_task_value.value = this.value;"
		/>

		<field
			name="task_value_usuarios"
			type="list"
			label="COM_SABULLVIAL_REGLA_TASK_VALUE_USUARIOS_LABEL"
			default="none"
			onchange="
				this.form.jform_task_value_usuario_select.value = '';
				jQuery('#jform_task_value_usuario_select').trigger('liszt:updated').trigger('change');
			"
		>
			<option value="none">Dejar vacio</option>
			<option showon="event_create:estado_cotizacion" value="desde_cotizacion">COM_SABULLVIAL_REGLA_DESDE_COTIZACION</option>
			<option showon="event_create:estado_cliente,inactive_cliente" value="desde_vendedor_cliente">COM_SABULLVIAL_REGLA_DESDE_VENDEDOR_DEL_CLIENTE</option>
			<option value="select">Elegir</option>
		</field>

		<field
			showon="task_value_usuarios:select"
			name="task_value_usuario_select"
			type="sql"
			query="SELECT id, name FROM #__users"
			key_field="id"
			value_field="name"
			label="COM_SABULLVIAL_REGLA_TASK_VALUE_USUARIO_SELECT_LABEL"
			class="inputbox"
			default=""
		/>

		<field
			name="task_value_group"
			type="list"
			label="COM_SABULLVIAL_REGLA_TASK_VALUE_GROUP_LABEL"
			default="none"
			onchange="
				this.form.jform_task_value_group_select.value = '';
				jQuery('#jform_task_value_group_select').trigger('liszt:updated').trigger('change');
			"
		>
			<option value="none">Dejar vacio</option>
			<option value="select">Elegir</option>
		</field>

		<field
			showon="task_value_group:select"
			name="task_value_group_select"
			type="sql"
			query="SELECT id, title FROM `#__usergroups` WHERE parent_id = 10"
			key_field="id"
			value_field="title"
			label="COM_SABULLVIAL_REGLA_TASK_VALUE_GROUP_ID_LABEL"
			class="inputbox no-chosen select2"
			default=""
		>
			<option value="">- Seleccione un grupo de usuario -</option>
		</field>

		<field
			name="task_value_cliente"
			type="list"
			label="COM_SABULLVIAL_REGLA_TASK_VALUE_CLIENTE_LABEL"
			default="none"
			onchange="
				this.form.jform_task_value_cliente_select.value = '';
				jQuery('#jform_task_value_cliente_select').trigger('liszt:updated').trigger('change');
			"
		>
			<option value="none">Dejar vacio</option>
			<option showon="event_create:estado_cliente" value="desde_cliente">COM_SABULLVIAL_REGLA_DESDE_CLIENTE_SISTEMA</option>
			<option value="select">Elegir</option>
		</field>

		<field
			showon="task_value_cliente:select"
			name="task_value_cliente_select"
			type="clienteajax"
			label="COM_SABULLVIAL_REGLA_TASK_VALUE_CLIENTE_SELECT_LABEL"
			class="inputbox"
			default=""
		>
			<option value="">- Seleccione un cliente -</option>
		</field>

		<field
			name="task_value_codigo_cliente"
			type="list"
			label="COM_SABULLVIAL_REGLA_TASK_VALUE_CODIGO_CLIENTE_LABEL"
			default="none"
			onchange="
				this.form.jform_task_value_codigo_cliente_select.value = '';
				jQuery('#jform_task_value_codigo_cliente_select').trigger('liszt:updated').trigger('change');
			"
		>
			<option value="none">Dejar vacio</option>
			<option showon="event_create:estado_cotizacion" value="desde_cotizacion_cliente">COM_SABULLVIAL_REGLA_DESDE_CLIENTE_COTIZACION</option>
			<option showon="event_create:inactive_cliente" value="desde_cliente_tango">COM_SABULLVIAL_REGLA_DESDE_CLIENTE</option>
			<option value="select">Elegir</option>
		</field>

		<field
			showon="task_value_codigo_cliente:select"
			name="task_value_codigo_cliente_select"
			type="clienteortext"
			label="COM_SABULLVIAL_REGLA_TASK_VALUE_CODIGO_CLIENTE_SELECT_LABEL"
			class="inputbox no-chosen input-xlarge"
			default=""
		>
			<option value="">- Seleccione un cliente -</option>
		</field>

		<field
			showon="event_create:estado_cotizacion"
			name="task_value_id_cotizacion"
			type="list"
			label="COM_SABULLVIAL_REGLA_TASK_VALUE_ID_COTIZACION_LABEL"
			default=""
		>
			<option value="">- Seleccione una opción -</option>
			<option value="desde_cotizacion">COM_SABULLVIAL_REGLA_DESDE_COTIZACION</option>
		</field>

		<field
			name="task_value_start_date"
			type="customtext"
			inputtype="number"
			label="COM_SABULLVIAL_REGLA_TASK_VALUE_START_DATE_LABEL"
			description="COM_SABULLVIAL_REGLA_TASK_VALUE_START_DATE_DESC"
			default="0"
			addon="días"
			addonposition="right"
		/>

		<field
			name="task_value_expiration_date"
			type="customtext"
			inputtype="number"
			label="COM_SABULLVIAL_REGLA_TASK_VALUE_EXPIRATION_DATE_LABEL"
			description="COM_SABULLVIAL_REGLA_TASK_VALUE_EXPIRATION_DATE_DESC"
			default="3"
			addon="días"
			addonposition="right"
		/>

		<field
			name="task_value"
			type="hidden"
			label="COM_SABULLVIAL_TAREA_TASK_VALUE_LABEL"
			description="COM_SABULLVIAL_TAREA_TASK_VALUE_DESC"
			size="40"
			class="inputbox"
			default=""
		/>

		<field
			name="created"
			type="calendar"
			label="JGLOBAL_FIELD_CREATED_LABEL"
			description="COM_SABULLVIAL_FIELD_CREATED_DESC"
			translateformat="true"
			showtime="true"
			size="22"
			filter="user_utc"
		/>

		<field
			name="created_by"
			type="user"
			label="COM_SABULLVIAL_FIELD_CREATED_BY_LABEL"
			description="COM_SABULLVIAL_FIELD_CREATED_BY_DESC"
		/>

		<field
			name="created_by_alias"
			type="text"
			label="COM_SABULLVIAL_FIELD_CREATED_BY_ALIAS_LABEL"
			description="COM_SABULLVIAL_FIELD_CREATED_BY_ALIAS_DESC"
			size="20"
		/>

		<field
			name="modified"
			type="calendar"
			label="JGLOBAL_FIELD_MODIFIED_LABEL"
			description="COM_SABULLVIAL_FIELD_MODIFIED_DESC"
			class="readonly"
			translateformat="true"
			showtime="true"
			size="22"
			readonly="true"
			filter="user_utc"
		/>

		<field
			name="modified_by"
			type="user"
			label="JGLOBAL_FIELD_MODIFIED_BY_LABEL"
			class="readonly"
			readonly="true"
			filter="unset"
		/>
	</fieldset>
</form>