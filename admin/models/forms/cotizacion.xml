<?xml version="1.0" encoding="utf-8"?>
<form>
	<fieldset name="basic">
		<field
			name="id"
			type="hidden"
			label="JGLOBAL_FIELD_ID_LABEL"
			description="JGLOBAL_FIELD_ID_DESC"
			default="0"
			class="readonly"
			readonly="true"
		/>

    	<field
			name="asset_id"
			type="hidden"
			filter="unset"
		/>

		<field
			name="cliente"
			type="hidden"
		/>

		<field
			name="tango_enviar"
			type="radio"
			label="COM_SABULLVIAL_COTIZACION_ENVIAR_A_TANGO_LABEL"
			description="COM_SABULLVIAL_COTIZACION_ENVIAR_A_TANGO_DESC"
			class="btn-group btn-group-yesno"
			default="0"
			readonly="true"
			>
			<option value="1">JYES</option>
			<option value="0">JNO</option>
		</field>

		<field
			name="tango_fecha_sincronizacion"
			type="calendar"
			label="COM_SABULLVIAL_COTIZACION_ENVIAR_A_TANGO_FECHA_LABEL"
			description="COM_SABULLVIAL_COTIZACION_ENVIAR_A_TANGO_FECHA_DESC"
			translateformat="true"
			showtime="true"
			size="22"
			filter="user_utc"
			readonly="true"
		/>

		<field
			name="id_cliente"
			type="clienteortext"
			fieldcliente="cliente"
			label="COM_SABULLVIAL_COTIZACION_CLIENTE_LABEL"
			description="COM_SABULLVIAL_COTIZACION_CLIENTE_DESC"
			class="inputbox span12"
			value="000000"
			default="000000"
			onchange="clienteHasChanged(this)"/>

		<field
			name="email"
			type="text"
			label="COM_SABULLVIAL_COTIZACION_EMAIL_LABEL"
			description="COM_SABULLVIAL_COTIZACION_EMAIL_DESC"
			size="40"
			class="inputbox"
			default=""
		/>

    	<field
			showon="id_cliente:,000000"
			name="documento_tipo"
			label="COM_SABULLVIAL_COTIZACION_DOCUMENTO_TIPO_LABEL"
			description="COM_SABULLVIAL_COTIZACION_DOCUMENTO_TIPO_DESC"
			type="list">
			<option value="">- Seleccione un tipo -</option>	
			<option value="80">CUIT</option>			
			<option value="96">DNI</option>
		</field>

    	<field
			showon="id_cliente:,000000"
			name="documento_numero"
			label="COM_SABULLVIAL_COTIZACION_DOCUMENTO_NUMERO_LABEL"
			description="COM_SABULLVIAL_COTIZACION_DOCUMENTO_NUMERO_DESC"
			type="text"
		/>

		<field
			showon="id_cliente!:,0"
			name="id_direccion"
			type="sitclientedireccionentrega"
			label="COM_SABULLVIAL_COTIZACION_CLIENTE_DIRECCION_LABEL"
			description="COM_SABULLVIAL_COTIZACION_CLIENTE_DIRECCION_DESC"
			class="inputbox span6 no-chosen select2"
			default=""
			onchange="reload(this, '')"
			>
			<option value="">COM_SABULLVIAL_COTIZACION_SELECCIONAR_DIRECCION</option>
		</field>

		<field
			showon="id_cliente!:,0"
			name="id_transporte"
			type="transporte"
			label="COM_SABULLVIAL_COTIZACION_TRANSPORTE_LABEL"
			description="COM_SABULLVIAL_COTIZACION_TRANSPORTE_DESC"
			class="inputbox span6 no-chosen select2"
			default=""
			onchange="reload(this, 'cotizacion.changeTransporte')"
			>
			<option value="">COM_SABULLVIAL_COTIZACION_SELECCIONAR_TRANSPORTE</option>
		</field>

		<field
			showon="id_cliente!:,0"
			name="id_deposito"
			type="deposito"
			label="COM_SABULLVIAL_COTIZACION_DEPOSITO_LABEL"
			description="COM_SABULLVIAL_COTIZACION_DEPOSITO_DESC"
			class="inputbox"
			default=""
			>
			<option value="">COM_SABULLVIAL_COTIZACION_SELECCIONAR_DEPOSITO</option>
		</field>

		<field
			name="id_deposito_tango"
			type="hidden"
			default=""
			/>

		<field
			name="id_estadocotizacion"
			type="estadocotizacion"
			label="JSTATUS"
			description="JFIELD_PUBLISHED_DESC"
			class="chzn-color-state chzn-estadocotizacion"
			default="2"
			size="1"
			>
		</field>

		<field
			name="cotizacionhistorico"
			type="cotizacionhistoricotable"
			label=" "
			style="max-height: 161px;overflow-y: auto; max-width: 500px"
			>
		</field>

		<field
			name="id_estado_tango"
			type="estadocotizaciontango"
			label="COM_SABULLVIAL_COTIZACION_ESTADO_TANGO_LABEL"
			description="COM_SABULLVIAL_COTIZACION_ESTADO_TANGO_DESC"
			class="chzn-color-state chzn-estadocotizaciontango"
			default="2"
			size="1"
			exclude="5,101"
			>
		</field>

		<field
			name="cotizaciontangohistorico"
			type="cotizaciontangohistoricotable"
			label=" "
			style="max-height: 161px;overflow-y: auto; max-width: 500px"
			>
		</field>

		<field
			name="esperar_pagos"
			type="radio"
			label="COM_SABULLVIAL_COTIZACION_ESPERAR_PAGOS_LABEL"
			description="COM_SABULLVIAL_COTIZACION_ESPERAR_PAGOS_DESC"
			class="btn-group btn-group-yesno"
			default="0"
			readonly="true"
			>
			<option value="1">JYES</option>
			<option value="0">JNO</option>
		</field>

		<field
			name="id_estadocotizacionpago"
			type="estadocotizacionpago"
			label="COM_SABULLVIAL_COTIZACION_ESTADO_PAGO_LABEL"
			description="COM_SABULLVIAL_COTIZACION_ESTADO_PAGO_DESC"
			class="chzn-color-state chzn-estadocotizacionpago"
			readonly="true"
		/>

		<field
			name="cotizacionpagohistorico"
			type="cotizacionpagohistoricotable"
			label=" "
			style="max-height: 161px;overflow-y: auto; max-width: 500px"
			>
		</field>

		<field
			name="reference"
			type="hidden"
			label="COM_SABULLVIAL_COTIZACION_REFERENCE_LABEL"
			description="COM_SABULLVIAL_COTIZACION_REFERENCE_DESC"
			size="40"
			class="inputbox"
			default=""
		/>

    	<field
			name="id_lista_precio"
			default="1"
			type="hidden"
		/>

		<field
			name="delivery_term"
			type="text"
			label="COM_SABULLVIAL_COTIZACION_PLAZO_DE_ENTREGA_LABEL"
			description="COM_SABULLVIAL_COTIZACION_PLAZO_DE_ENTREGA_DESC"
			size="40"
			class="inputbox"
			hint="COM_SABULLVIAL_COTIZACION_PLAZO_DE_ENTREGA_HINT"
			default=""
		/>

		<field
			name="solicitante"
			type="text"
			label="COM_SABULLVIAL_COTIZACION_SOLICITANTE_LABEL"
			description="COM_SABULLVIAL_COTIZACION_SOLICITANTE_DESC"
			size="40"
			class="inputbox span6"
			default=""
			max="255"
		/>

		<field
			name="observations"
			type="textarea"
			label="COM_SABULLVIAL_COTIZACION_OBSERVACIONES_LABEL"
			description="COM_SABULLVIAL_COTIZACION_OBSERVACIONES_DESC"
			size="40"
			class="inputbox span6"
			default=""
			rows="10"
			cols="40"
		/>

		<field
			name="note"
			type="textarea"
			label="COM_SABULLVIAL_COTIZACION_MENSAJE_INTERNO_LABEL"
			description="COM_SABULLVIAL_COTIZACION_MENSAJE_INTERNO_DESC"
			size="40"
			class="inputbox span6"
			default=""
			rows="10"
			cols="40"
		/>

		<field
			name="created"
			type="calendar"
			label="JGLOBAL_FIELD_CREATED_LABEL"
			description="COM_SABULLVIAL_FIELD_CREATED_DESC"
			translateformat="true"
			showtime="true"
			size="22"
			filter="user_utc"
		/>

		<field
			name="created_by"
			type="user"
			label="COM_SABULLVIAL_FIELD_CREATED_BY_LABEL"
			description="COM_SABULLVIAL_FIELD_CREATED_BY_DESC"
		/>

		<field
			name="created_by_alias"
			type="text"
			label="COM_SABULLVIAL_FIELD_CREATED_BY_ALIAS_LABEL"
			description="COM_SABULLVIAL_FIELD_CREATED_BY_ALIAS_DESC"
			size="20"
		/>
		
		<field name="version_note"
			type="text"
			label="JGLOBAL_FIELD_VERSION_NOTE_LABEL"
			description="JGLOBAL_FIELD_VERSION_NOTE_DESC"
			class="inputbox" size="45"
			labelclass="control-label"
		/>

		<field
			name="modified"
			type="calendar"
			label="JGLOBAL_FIELD_MODIFIED_LABEL"
			description="COM_SABULLVIAL_FIELD_MODIFIED_DESC"
			class="readonly"
			translateformat="true"
			showtime="true"
			size="22"
			readonly="true"
			filter="user_utc"
		/>

		<field
			name="modified_by"
			type="user"
			label="JGLOBAL_FIELD_MODIFIED_BY_LABEL"
			class="readonly"
			readonly="true"
			filter="unset"
		/>
		
    	<field
			name="rules"
			type="rules"
			label="JFIELD_RULES_LABEL"
			id="rules"
			translate_label="false"
			filter="rules"
			validate="rules"
			component="com_sabullvial"
			section="cotizacion"
		/>
	</fieldset>

	<fieldset name="products" addfieldpath="/administrator/components/com_sabullvial/models/fields">

		<field
			name="id_condicionventa_fake"
			type="condicionventa"
			label="COM_SABULLVIAL_COTIZACION_FORMA_DE_PAGO_LABEL"
			default="49"
			required="true"
			onchange="reload(this, 'cotizacion.changeCondicionVenta')"
			class="input-xxlarge"
			>
			<option value="">COM_SABULLVIAL_COTIZACION_SELECCIONAR_FORMAR_DE_PAGO</option>
		</field>

		<field
			name="id_condicionventa"
			type="condicionventa"
			label="COM_SABULLVIAL_COTIZACION_FORMA_DE_PAGO_TANGO_LABEL"
			default="49"
			required="true"
			onchange="reload(this, 'cotizacion.changeCondicionVenta')"
			class="input-xxlarge"
			>
			<option value="">COM_SABULLVIAL_COTIZACION_SELECCIONAR_FORMAR_DE_PAGO_TANGO</option>
		</field>

		<field
			name="iva"
			type="radio"
			label="COM_SABULLVIAL_FILTER_IVA"
			class="btn-group btn-group-yesno"
			default="1"
			>
			<option value="1" onchange="reload(this, 'cotizacion.changeIva')">JYES</option>
			<option value="0" onchange="reload(this, 'cotizacion.changeIva')">JNO</option>
		</field>

		<field
			name="dolar"
			type="radio"
			label="COM_SABULLVIAL_FILTER_DOLAR"
			class="btn-group btn-group-yesno"
			default="0"
			>
			<option value="1" onchange="reload(this, 'cotizacion.changeDolar')">JYES</option>
			<option value="0" onchange="reload(this, 'cotizacion.changeDolar')">JNO</option>
		</field>

		<field 
			showon="id_condicionventa!:"
			name="cotizaciondetalle" 
			type="modal_cotizaciondetalle"
			label="COM_SABULLVIAL_COTIZACION_FIELD_SELECCIONAR_PRODUCTO_LABEL"
			description="COM_SABULLVIAL_COTIZACION_FIELD_SELECCIONAR_PRODUCTO_DESC"
			multiple="true"
			select="true"
			clear="true"
			iva="false"
			dolar="false"
		>
			<form name="cotizaciondetalleform" class="cotizacion-detalles">
					<field
						name="codigo_sap"
						type="hidden"
						label="CÃ³digo"
						size="150"
						class="inputbox"
						default=""
						required="true"
					/>

					<field
						name="nombre"
						type="text"
						label="Nombre"
						size="150"
						class="inputbox"
						default=""			
						required="true"
					/>

					<field
						name="marca"
						type="hidden"
						label="Marca"
						size="150"
						class="inputbox"
						default=""
					/>

					<field
						name="precio"
						type="number"
						label="COM_SABULLVIAL_COTIZACION_FIELD_PRECIO_LABEL"
						size="40"
						class="inputbox"
						min="1"
						step="0.01"
						default="0"
						required="true"
						onchange="calcCotizacionDetalle(this)"
					/>

					<field
						name="cantidad"
						type="number"
						label="Cantidad"
						size="10"
						class="inputbox"
						min="0"
						step="1"
						default="0"		
						required="true"
						onchange="calcCotizacionDetalle(this)"
					/>

					<field
						name="descuento"
						type="number"
						label="Descuento (%)"
						size="10"
						class="inputbox"
						min="0"
						max="100"
						default="0"
						onchange="calcCotizacionDetalle(this)"
					/>

					<field
						name="subtotal"
						type="number"
						label="Subtotal"
						readonly="true"
						size="40"
						class="inputbox"
						min="0"
						default="0"
					/>

					<field
						name="id_producto"
						type="hidden"
						readonly="true"
						required="true"
					/>
					
					<field
						name="id"
						size="1"
						label="ID"
						type="hidden"
						readonly="true"
					/>
			</form>
		</field>

		<field
			showon="id_condicionventa!:"
			name="subtotal"
			type="number"
			label="COM_SABULLVIAL_COTIZACION_SUBTOTAL_LABEL"
			size="40"
			class="inputbox"
			readonly="true"
		/>

		<field
			showon="id_condicionventa!:"
			name="iva_21"
			type="number"
			label="COM_SABULLVIAL_COTIZACION_IVA_21_LABEL"
			size="40"
			class="inputbox"
			readonly="true"
		/>

		<field
			showon="id_condicionventa!:"
			name="iibb"
			type="number"
			label="COM_SABULLVIAL_COTIZACION_IIBB_LABEL"
			size="40"
			class="inputbox"
			readonly="true"
		/>

    	<field
			name="porcentaje_iibb"
			type="hidden"
		/>

		<field
			showon="id_condicionventa!:"
			name="descuento"
			type="hidden"
			label="Descuento"
			size="10"
			class="inputbox"
			min="0"
			default="0"	
			required="true"	
			onchange="calcCotizacionDesgloce(this)"
		/>

		<field
			showon="id_condicionventa!:"
			name="total"
			type="number"
			label="COM_SABULLVIAL_COTIZACION_TOTAL_LABEL"
			size="40"
			class="inputbox"
			min="1"
			step="0.01"
			default="0"
			required="true"
			readonly="true"
		/>
		
	</fieldset>

	<fieldset name="purchaseorder">

		<field
			name="ordendecompra_file"
			type="file"
			label="COM_SABULLVIAL_COTIZACION_ORDEN_DE_COMPRA_FILE_LABEL"
			description="COM_SABULLVIAL_COTIZACION_ORDEN_DE_COMPRA_FILE_DESC"
			size="40"
			class="inputbox"
			default=""
		/>

		<field
			name="ordendecompra_numero"
			type="text"
			label="COM_SABULLVIAL_COTIZACION_ORDEN_DE_COMPRA_NUMERO_LABEL"
			description="COM_SABULLVIAL_COTIZACION_ORDEN_DE_COMPRA_NUMERO_DESC"
			size="40"
			class="inputbox"
			default=""
		/>

		<field
			name="ordendecompra_file_name"
			type="hidden"
		/>
		<field
			name="ordendecompra_file_hash"
			type="hidden"
		/>
		<field
			name="ordendecompra_file_ext"
			type="hidden"
		/>
		
	</fieldset>
</form>